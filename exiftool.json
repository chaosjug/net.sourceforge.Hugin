{
    "name": "exiftool",
    "buildsystem": "simple",
    "build-options": {
        "env": {
            "PREFIX": "${FLATPAK_DEST}"
        }
    },
    "build-commands": [
        "perl Makefile.PL PREFIX=$PREFIX",
        "make install"
    ],
    "modules": [
        {
            "name": "perl",
            "no-autogen": true,
            "config-opts": [
                "-des",
                "-Duseshrplib"
            ],
            "build-options": {
                "cflags": "-fPIC",
                "ldflags": "-fpic"
            },
            "cleanup": [
                "/man",
                "*.pod",
                "*.h"
            ],
            "post-install": [
                "find ${FLATPAK_DEST}/lib/perl5/ -name \\*.so -exec chmod u+w {} \\;"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://www.cpan.org/src/5.0/perl-5.30.1.tar.gz",
                    "sha256": "bf3d25571ff1ee94186177c2cdef87867fd6a14aa5a84f0b1fb7bf798f42f964"
                },
                {
                    "type": "script",
                    "dest-filename": "configure",
                    "commands": [
                        "exec ./configure.gnu $@"
                    ]
                }
            ]
        }
    ],
    "sources": [
        {
            "type": "archive",
            "url": "https://exiftool.org/Image-ExifTool-12.00.tar.gz",
            "sha256": "d0792cc94ab58a8b3d81b18ccdb8b43848c8fb901b5b7caecdcb68689c6c855a"
        }
    ]
}
